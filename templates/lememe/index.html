{% extends 'lememe/base.html' %}
{% load staticfiles %}

{% block title_block %}
Home
{% endblock%}

{% block welcome_block %}
<div class="shadow-sm p-3 mx-auto bg-white rounded">
    {% if user.is_authenticated %}
    <h5 class="welcome_text">"Welcome back {{ user.username }}"</h5>

    {% else %}
    <h5 class="welcome_text">"Welcome to le-Meme"</h5>
    {% endif %}
</div>
{% endblock %}

{% block rightbody_block %}
<div class="container pl-md-5 pr-md-5 pr-sm-0 pl-sm-0">
    <ul class="nav nav-pills" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="popular-tab" data-toggle="tab" href="#popular" role="tab"
               aria-controls="popular"
               aria-selected="true">Popular</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="new-tab" data-toggle="tab" href="#new" role="tab" aria-controls="new"
               aria-selected="false">New</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="search-tab" data-toggle="tab" href="#search" role="tab" aria-controls="search"
               aria-selected="false">Search</a>
        </li>
    </ul>
    <hr>
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="popular" role="tabpanel" aria-labelledby="home-tab">

            {% for post in popular_posts %}
            <!-- View for one post -->
            <div class="card border-0 shadow">
                <div class="card-header">{{post.title}}</div>
                <img src="{{ MEDIA_URL }}{{post.image}}" class="card-img-top" alt="Post's Image">
                <div class="card-body text-center">
                    <div class="card-text text-black-50">{{post.user}}</div>
                </div>
            </div>
            {% endfor %}

            {% if popular_posts.has_other_pages %}
            <ul class="pagination justify-content-center pt-4">
                {% if popular_posts.has_previous %}
                <li class="page-item"><a class="page-link" href="?page={{ popular_posts.previous_page_number }}">&laquo;</a>
                </li>
                {% else %}
                <li class="page-item disabled"><span class="page-link">&laquo;</span></li>
                {% endif %}
                {% for i in popular_posts.paginator.page_range %}
                {% if popular_posts.number == i %}
                <li class="page-item active"><span class="page-link">{{ i }} <span
                        class="sr-only">(current)</span></span></li>
                {% else %}
                <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
                {% endfor %}
                {% if popular_posts.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{ popular_posts.next_page_number }}">&raquo;</a></li>
                {% else %}
                <li class="page-item disabled"><span class="page-link">&raquo;</span></li>
                {% endif %}
            </ul>
            {% endif %}
        </div>
        <div class="tab-pane fade" id="new" role="tabpanel" aria-labelledby="profile-tab">...</div>
        <div class="tab-pane fade" id="search" role="tabpanel" aria-labelledby="contact-tab">...</div>
    </div>
</div>
{% endblock %}